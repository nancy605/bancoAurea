<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-nw04uA6Gb8KuIr7/zpJZ6V3VvXyLqiw5g2Qp0iAJmzN+B6V1Z2VCe0JNwF9tTJpP" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-IXjXzdm6E1UyAUR7uy7WJHkFdq+9pFNGsCsf2V/e5O4J20Nz7xEsEmheq7Hq5cg4" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.9/dist/sweetalert2.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.9/dist/sweetalert2.min.js"></script>
    <link href="assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/css/font-awesome.min.css" rel="stylesheet">
    <link href="assets/css/style.css" rel="stylesheet">
    <script type="text/javascript">
        function addEvent(ele, eve, fun, cap) {
            if (ele.attachEvent)
                ele.attachEvent('on' + eve, fun);
            else
                ele.addEventListener(eve, fun, cap);
        }
        
        function cargar() {
            var boton = document.getElementById("boton");
            addEvent(boton, 'click', validaDatos, false);
        }

        function validaDatos() {
            var cuenta = document.getElementsByName("cliente_id")[0].value.trim();
            if (cuenta !== "") {
                conexionServidor(cuenta);
            } else {
                Swal.fire({
                    title: "Ingresa un Número de Cuenta",
                    confirmButtonText: "Confirmar"
                });
            }
        }

        function conexionServidor(cuenta) {
            var conexion = xmlhttprequest();
            conexion.onreadystatechange = esperaRespuesta;
            conexion.open("POST", "cuenta.php", true);
            conexion.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            conexion.send("numeroCuenta=" + encodeURIComponent(cuenta));
        }

        function esperaRespuesta() {
            if (conexion.readyState == 4) {
                if (conexion.status == 200) {
                    var respuesta = conexion.responseText.trim();
                    if (respuesta === "Cuenta encontrada") {
                        window.location.href = "DatosCliE.php";
                    } else {
                        Swal.fire({
                            title: respuesta,
                            confirmButtonText: "Confirmar"
                        });
                    }
                } else {
                    Swal.fire({
                        title: "Error en la conexión con el servidor",
                        confirmButtonText: "Confirmar"
                    });
                }
            }
        }

        function xmlhttprequest() {
            return new XMLHttpRequest();
        }

        addEvent(window, 'load', cargar, false);
    </script>
    <title>Buscar Cliente</title>
</head>
<body>
    <section class="form-02-main">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="_lk_de">
                        <div class="form-03-main">
                            <div class="logo">
                                <img src="assets/images/user.png" alt="User Icon"> 
                                <span class="logo-text">Banco Áurea</span>
                            </div>
                            <form id="searchForm">
                                <div class="form-group">
                                    <input type="text" name="cliente_id" class="form-control" placeholder="NÚMERO DE CUENTA">
                                </div>
                                <div class="form-group">
                                    <input type="button" class="btn_sesionE" value="BUSCAR" id="boton">
                                </div>
                                <div class="form-group">
                                    <a href="regisObusc.php" class="btn-regresar"><i class="fa fa-arrow-left"></i> Regresar</a>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</body>
</html>